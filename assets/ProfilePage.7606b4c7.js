import{Q as y,e as c,d as C}from"./QBtn.35dac5c7.js";import{P as S,Q as I}from"./ProfileIcon.01f8e9ac.js";import{I as k,_ as E,J as P,K as s,W as r,N as e,f as a,F as m,X as U,M as w,Y as b,Z as u,u as v,a8 as f,L as _,O as g,aq as R,al as D}from"./index.2d1c1e3f.js";import"./uid.8c2a8409.js";import"./QChip.6e1e99aa.js";import"./QMenu.604f0253.js";import"./scroll.55c5e954.js";import"./rtl.b51694b1.js";import"./format.3e32b8d9.js";const T={props:{id:{type:[Number],default:null}},data(){return{userId:this.id}},mounted(){this.getUserEvents()},computed:{...k({userEvents:"getUserEvents",userEventsStatus:"getUserEventsStatus"})},methods:{async getUserEvents(){this.userId!=null&&await Promise.all([this.profile!={}?this.$store.dispatch("GET_USER_EVENTS",{id:this.userId}):void 0])}},watch:{id(t){this.userId=t,this.getUserEvents()}}},q={class:""},V={key:0,class:"status"},N={key:1,class:"status"};function H(t,l,p,$,o,n){const d=P("router-link");return s(),r("div",null,[e("div",null,[e("div",q,[t.userEventsStatus=="loading"?(s(),r("div",V,[a(y,{color:"primary",size:"3em",class:"mx-auto"})])):t.userEventsStatus=="error"?(s(),r("div",N," \u0429\u043E\u0441\u044C \u043F\u0456\u0448\u043B\u043E \u043D\u0435 \u0442\u0430\u043A - \u043F\u0435\u0432\u043D\u043E, \u043F\u0440\u043E\u0431\u043B\u0435\u043C\u0438 \u0437\u0456 \u0437'\u0454\u0434\u043D\u0430\u043D\u043D\u044F\u043C. ")):(s(!0),r(m,{key:2},U(t.userEvents,(i,h)=>(s(),r("div",{key:h,class:"event-item-joined relative"},[a(d,{to:"/event-page?id="+i.id},{default:w(()=>[b(u(i.name),1)]),_:2},1032,["to"])]))),128))])])])}var L=E(T,[["render",H]]);const B={props:{id:{type:Number,required:!0}},data(){return{userId:this.id}},mounted(){this.getAuthorEvents()},computed:{...k({authorEvents:"getAuthorEvents",authorEventsStatus:"getAuthorEventsStatus"})},methods:{async getAuthorEvents(){this.userId!=null&&await Promise.all([this.$store.dispatch("GET_AUTHOR_EVENTS",{id:this.userId})])}},watch:{id(t){this.userId=t,this.getAuthorEvents()}}},z={class:""},A={key:0,class:"status"},x={key:1,class:"status"};function O(t,l,p,$,o,n){const d=P("router-link");return s(),r("div",null,[e("div",null,[e("div",z,[t.authorEventsStatus=="loading"?(s(),r("div",A,[a(y,{color:"primary",size:"3em",class:"mx-auto"})])):t.authorEventsStatus=="error"?(s(),r("div",x," \u0429\u043E\u0441\u044C \u043F\u0456\u0448\u043B\u043E \u043D\u0435 \u0442\u0430\u043A - \u043F\u0435\u0432\u043D\u043E, \u043F\u0440\u043E\u0431\u043B\u0435\u043C\u0438 \u0437\u0456 \u0437'\u0454\u0434\u043D\u0430\u043D\u043D\u044F\u043C. ")):(s(!0),r(m,{key:2},U(t.authorEvents,(i,h)=>(s(),r("div",{key:h,class:"event-item-created relative"},[a(d,{to:"/event-page?id="+i.id},{default:w(()=>[b(u(i.name),1)]),_:2},1032,["to"])]))),128))])])])}var Q=E(B,[["render",O]]);const G={components:{ProfileIcon:S,\u041F\u0440\u0438\u0454\u0434\u043D\u0430\u0432\u0441\u044F:L,\u0421\u0442\u0432\u043E\u0440\u0438\u0432:Q},async mounted(){await this.getProfile()},data(){return{API_URL:"https://map-of-activities-moa-back.onrender.com/api",userEmail:"UserEmail",userName:"UserName",tabs:["\u041F\u0440\u0438\u0454\u0434\u043D\u0430\u0432\u0441\u044F","\u0421\u0442\u0432\u043E\u0440\u0438\u0432"],selected:"\u041F\u0440\u0438\u0454\u0434\u043D\u0430\u0432\u0441\u044F",userPage:!0,showReportDetails:!1,showReportButton:!1,reportHeader:null,reportDescription:"",options:["\u041D\u0435\u0446\u0435\u043D\u0437\u0443\u0440\u043D\u0435 \u0456\u043C'\u044F \u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430","\u041D\u0435\u043A\u043E\u0440\u0435\u043A\u0442\u043D\u0430 \u0444\u043E\u0442\u043E\u0433\u0440\u0430\u0444\u0456\u044F \u043F\u0440\u043E\u0444\u0456\u043B\u044E","\u0421\u0442\u0432\u043E\u0440\u0435\u043D\u043D\u044F \u0444\u0430\u043B\u044C\u0448\u0438\u0432\u0438\u0445 \u043F\u043E\u0434\u0456\u0439","\u0421\u0442\u0432\u043E\u0440\u0435\u043D\u043D\u044F \u043D\u0435\u0431\u0435\u0437\u043F\u0435\u0447\u043D\u0438\u0445 \u043F\u043E\u0434\u0456\u0439","\u0406\u043D\u0448\u0435"]}},computed:{...k({profile:"getProfile",profileStatus:"getProfileStatus",authStatus:"getStatus"})},beforeRouteUpdate(t,l,p){t.query.id==null&&this.getProfile1(),p()},methods:{backToUserPage(){this.showReportDetails=!1,this.userPage=!0},reportUserPage(){this.showReportDetails=!0,this.userPage=!1},editProfile(){this.$router.push({name:"edit-profile"})},async getProfile(){console.log(this.$store.getters.getCurrentUser),console.log(this.$route.query.id);let t;this.$route.query.id==null?(t=this.$store.getters.getCurrentUser,this.showReportButton=!1):(t=this.$route.query.id,this.showReportButton=!0),console.log(t),await Promise.all([this.profile!={}?this.$store.dispatch("GET_PROFILE",{id:t}):void 0])},async getProfile1(){await Promise.all([this.profile!={}?this.$store.dispatch("GET_PROFILE",{id:this.$store.getters.getCurrentUser}):void 0])},async reportUser(){if(!this.reportHeader){alert("\u0411\u0443\u0434\u044C \u043B\u0430\u0441\u043A\u0430, \u0432\u0438\u0431\u0435\u0440\u0456\u0442\u044C \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A \u0434\u043B\u044F \u0432\u0430\u0448\u043E\u0457 \u0441\u043A\u0430\u0440\u0433\u0438.");return}if(this.reportHeader==="\u0406\u043D\u0448\u0435"&&!this.reportDescription){alert('\u0412\u0438 \u0432\u0438\u0431\u0440\u0430\u043B\u0438 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A "\u0406\u043D\u0448\u0435", \u0431\u0443\u0434\u044C \u043B\u0430\u0441\u043A\u0430, \u0434\u043E\u0434\u0430\u0439\u0442\u0435 \u043E\u043F\u0438\u0441 \u0412\u0430\u0448\u043E\u0457 \u0441\u043A\u0430\u0440\u0433\u0438');return}var t=this.$route.query.id;this.curUser=this.$store.getters.getCurrentUser,console.log(this.curUser),\u0441onsole.log(this.reportHeader),this.$store.dispatch("REPORT_USER",{userId:t,authorId:this.curUser,formData:{Header:this.reportHeader,Description:this.reportDescription},handler:l=>{this.$router.replace({path:"/profile-page",name:"profile-page",query:{id:this.$route.query.id}}),this.showReportDetails=!1,this.userPage=!0,this.reportHeader="",this.reportDescription=""},handlerError:l=>{console.error(l.response.data),console.log("error: "+l),alert("Error occurred: "+l)}})},logout(){this.$store.commit("logOut"),this.$router.push("/start-menu")}}},F={key:0,class:"status"},j={key:1},J={key:2},K={class:"TopLineProfile"},M=e("div",{class:"profile-text-spacer"},null,-1),W=e("div",{class:"profile-text",style:{"font-size":"16px","font-weight":"550"}}," \u041F\u0440\u043E\u0444\u0456\u043B\u044C ",-1),X={class:"logout-button"},Y={class:"avatar-container"},Z=["src"],ee={key:1},te={class:"button-container"},se={class:"user-details"},re={class:"detail"},oe=e("span",{class:"label"},"E-mail",-1),ie={class:"value"},le=e("div",{class:"fakeobject"},null,-1),ae={class:"detail"},ne=e("span",{class:"label"},"\u0406\u043C'\u044F",-1),ue={class:"value"},de={class:"user-details"},ce={class:"detail"},pe=e("span",{class:"label"},"\u041E\u043F\u0438\u0441",-1),he={style:{"margin-bottom":"20px"}},_e=["onClick"],me={class:"value"},ve={class:"TopLine"},fe=e("div",{style:{"font-size":"16px","font-weight":"550"}},"\u0414\u0435\u0442\u0430\u043B\u0456 \u0441\u043A\u0430\u0440\u0433\u0438 \u043D\u0430 \u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430",-1),ge={class:"inputStyle"},ye=e("div",{style:{"font-size":"16px","font-weight":"500",margin:"10px"}}," \u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044C \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A \u0434\u043B\u044F \u0441\u043A\u0430\u0440\u0433\u0438 ",-1),ke=e("div",{style:{"font-size":"16px","font-weight":"500",margin:"10px"}}," \u0414\u0435\u0442\u0430\u043B\u044C\u043D\u0438\u0439 \u043E\u043F\u0438\u0441 \u0412\u0430\u0448\u043E\u0457 \u0441\u043A\u0430\u0440\u0433\u0438 (\u043E\u043F\u0446\u0456\u043E\u043D\u0430\u043B\u044C\u043D\u043E) ",-1);function Ee(t,l,p,$,o,n){const d=P("ProfileIcon");return s(),r(m,null,[v(e("div",null,[t.profileStatus=="loading"||t.authStatus==""?(s(),r("div",F,[a(y,{color:"primary",size:"3em",class:"mx-auto"})])):t.profileStatus=="error"?(s(),r("div",j,"\u041D\u0435\u0432\u0434\u0430\u043B\u0430 \u0441\u043F\u0440\u043E\u0431\u0430 \u0437\u0430\u0432\u0430\u043D\u0442\u0430\u0436\u0442\u0438 \u0434\u0430\u043D\u0456")):(s(),r("div",J,[e("div",K,[M,W,e("div",X,[v(e("div",null,[this.$route.query.id!=null?(s(),_(c,{key:0,onClick:n.reportUserPage,label:"\u0421\u043A\u0430\u0440\u0433\u0430",color:"red-14"},null,8,["onClick"])):g("",!0)],512),[[f,o.showReportButton]]),this.$route.query.id==null||this.$route.query.id==this.$store.getters.getCurrentUser?(s(),_(c,{key:0,onClick:n.logout,label:"\u0412\u0438\u0439\u0442\u0438",color:"negative"},null,8,["onClick"])):g("",!0)])]),e("div",Y,[t.profile.imageURL?(s(),r("img",{key:0,src:this.API_URL+"/images/"+t.profile.imageURL,class:"user-image"},null,8,Z)):(s(),r("div",ee,[a(d)]))]),e("div",te,[this.$route.query.id==null||this.$route.query.id==this.$store.getters.getCurrentUser?(s(),_(c,{key:0,ripple:{center:!0},color:"secondary",style:{width:"100%"},label:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043F\u0440\u043E\u0444\u0456\u043B\u044C","no-caps":"",onClick:n.editProfile},null,8,["onClick"])):g("",!0)]),e("div",se,[e("div",re,[oe,e("span",ie,u(t.profile.email),1)]),le,e("div",ae,[ne,e("span",ue,u(t.profile.name),1)])]),e("div",de,[e("div",ce,[pe,e("span",he,u(t.profile.description),1)])]),e("div",null,[(s(!0),r(m,null,U(o.tabs,i=>(s(),r("button",{key:i,onClick:h=>o.selected=i,class:D(["tab-btn",{active:o.selected===i}])},[e("span",me,u(i),1)],10,_e))),128)),(s(),_(R(o.selected),{id:t.profile.id,class:"tab"},null,8,["id"]))])]))],512),[[f,o.userPage]]),v(e("div",null,[e("div",ve,[a(c,{flat:"",style:"",onClick:n.backToUserPage,icon:"arrow_back",color:"primary"},null,8,["onClick"]),fe,a(c,{flat:"",style:"",onClick:n.reportUser,label:"\u0412\u0456\u0434\u043F\u0440\u0430\u0432\u0438\u0442\u0438",color:"primary"},null,8,["onClick"])]),e("div",ge,[ye,a(I,{outlined:"",modelValue:o.reportHeader,"onUpdate:modelValue":l[0]||(l[0]=i=>o.reportHeader=i),options:o.options},null,8,["modelValue","options"]),ke,a(C,{modelValue:o.reportDescription,"onUpdate:modelValue":l[1]||(l[1]=i=>o.reportDescription=i),outlined:"",autogrow:"",clearable:""},null,8,["modelValue"])])],512),[[f,o.showReportDetails]])],64)}var De=E(G,[["render",Ee]]);export{De as default};
