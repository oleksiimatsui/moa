import{e as n,d as a}from"./QBtn.35dac5c7.js";import{Q as m}from"./uid.8c2a8409.js";import{_ as f,I as y,K as u,W as d,O as c,u as h,a8 as p,N as l,f as o,M as g,F as b}from"./index.2d1c1e3f.js";const x={data(){return{name:"",email:"",password:"",password1:"",isPwd:!0,isPwdLogin:!0,showStartMenu:!0,showLogin:!1,showRegister:!1,userId:"",code:"",codeExists:!1,loginError:!1}},computed:{...y({confirmStatus:"getConfirmStatus"})},props:{showTabs:{type:Boolean,default:!1}},watch:{password(t){this.passwordMismatch=t!==this.password1},password1(t){this.passwordMismatch=t!==this.password}},async mounted(){this.inputProcessing()},methods:{async inputProcessing(){const e=window.location.hash.substring(13).split("&");e.length>1&&(this.userId=e[0].replace("userId=",""),this.code=e[1].replace("code=",""),this.userId!=null&&this.code!=null&&(await this.getConfirm(),this.$router.push({name:"start-menu",params:{}}),this.codeExists=!0,this.goToLoginMenu()))},validatePassword(t){return t===this.password||"Password is not matched"},async getConfirm(){await Promise.all([this.$store.dispatch("GET_CONFIRM",{id:this.userId,code:this.code})]),console.log("get")},goToRegisterMenu(){this.showStartMenu=!1,this.showRegister=!0,this.showLogin=!1},goToLoginMenu(){this.showStartMenu=!1,this.showRegister=!1,this.showLogin=!0},goToStartMenu(){this.showStartMenu=!0,this.showLogin=!1,this.showRegister=!1},guestLogin(){this.$store.commit("logOut"),this.$router.push({name:"events-list",params:{}})},async registerUser(){this.$store.dispatch("POST_REGISTER",{formData:{name:this.name,email:this.email,password:this.password},handler:t=>{console.log("success: "+t),this.goToLoginMenu(),this.loginError=!0},handlerError:t=>{console.log("error: "+t)}})},async loginUser(){this.$store.dispatch("POST_USER_LOGIN",{formData:{email:this.email,password:this.password,rememberMe:!0},handler:t=>{console.log("success: "+t),console.log(this.$store.getters.getCurrentUser),console.log(this.$route.query.id);let e;this.$route.query.id==null?e=this.$store.getters.getCurrentUser:e=this.$route.query.id,console.log(e),Promise.all([this.profile!={}?this.$store.dispatch("GET_PROFILE",{id:e}):void 0]),this.$router.push({name:"events-list",params:{}})},handlerError:async t=>{console.log("error: "+t)}})},async refreshToken(){this.$store.dispatch("POST_REFRESH_TOKEN",{formData:{accessToken:this.$store.getters.getToken,refreshToken:this.$store.getters.getRefreshToken},handler:t=>{console.log("success: "+t)},handlerError:t=>{console.log("error: "+t.response)}})}}},_={key:0},k={class:"backgroundStartMenu"},v=l("div",{class:"absolute top-1/4 left-1/2 transform -translate-x-1/2 -translate-y-1/2 rotate-[19deg] text-[36px] md:text-[70px] text-center text-white",style:{"font-family":"'ReenieBeanie', sans-serif"}}," Map of Activities ",-1),S=l("p",{class:"text-white text-center",style:{position:"absolute",bottom:"0",left:"50%",transform:"translateX(-50%)",width:"100%"}}," \u0412\u0430\u0448\u0456 \u043E\u043F\u0446\u0456\u0457 \u0431\u0443\u0434\u0443\u0442\u044C \u043E\u0431\u043C\u0435\u0436\u0435\u043D\u0456, \u0430\u043B\u0435 \u0432\u0438 \u043C\u043E\u0436\u0435\u0442\u0435 \u0437\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044C \u043F\u0456\u0437\u043D\u0456\u0448\u0435. ",-1),C={class:"background"},P={class:"TopLine"},T={class:"inputStyle"},M={class:"background"},E={class:"TopLine"},V={class:"inputStyle"},L={key:0,class:"success-message"},R={key:1,class:"error-message"},I={key:2,class:"error-message"};function U(t,e,w,q,s,i){return u(),d(b,null,[w.showTabs?(u(),d("div",_)):c("",!0),h(l("div",k,[v,o(n,{label:"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044F",onClick:i.goToRegisterMenu,class:"w-3/4 mx-auto flex flex-col px-5 py-2.5 bg-teal-400 rounded-[7px] items-center gap-2.5 text-weight-bold absolute bottom-1/4 left-1/2 transform -translate-x-1/2"},null,8,["onClick"]),o(n,{label:"\u0423 \u0432\u0430\u0441 \u0432\u0436\u0435 \u0454 \u0430\u043A\u043A\u0430\u0443\u043D\u0442? \u0412\u0445\u0456\u0434",onClick:i.goToLoginMenu,class:"q-btn-none text-white text-[15px] items-center font-bold font-['Roboto'] underline tracking-tight mx-auto absolute bottom-1/4 left-1/2 transform -translate-x-1/2 -mb-11",style:{"white-space":"nowrap"}},null,8,["onClick"]),o(n,{label:"\u041F\u0440\u043E\u0434\u043E\u0432\u0436\u0438\u0442\u0438, \u044F\u043A \u0433\u0456\u0441\u0442\u044C",onClick:i.guestLogin,class:"w-1/3 mx-auto flex flex-col px-5 py-2.5 bg-teal-400 rounded-[7px] items-center gap-2.5 text-weight-bold absolute bottom-1/4 left-1/2 transform -translate-x-1/2 -mb-32"},null,8,["onClick"]),S],512),[[p,s.showStartMenu]]),h(l("div",C,[l("div",P,[o(n,{flat:"",style:"",onClick:i.goToStartMenu,icon:"arrow_back",color:"primary"},null,8,["onClick"]),o(n,{flat:"",style:"",onClick:i.registerUser,label:"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044F",color:"primary"},null,8,["onClick"])]),l("div",T,[o(a,{square:"",outlined:"",modelValue:s.name,"onUpdate:modelValue":e[0]||(e[0]=r=>s.name=r),label:"\u0406\u043C'\u044F",type:"text",clearable:""},null,8,["modelValue"]),o(a,{square:"",outlined:"",modelValue:s.email,"onUpdate:modelValue":e[1]||(e[1]=r=>s.email=r),label:"Email",type:"text",clearable:""},null,8,["modelValue"]),o(a,{square:"",outlined:"",modelValue:s.password,"onUpdate:modelValue":e[3]||(e[3]=r=>s.password=r),label:"\u041F\u0430\u0440\u043E\u043B\u044C",type:s.isPwd?"password":"text"},{append:g(()=>[o(m,{name:s.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[2]||(e[2]=r=>s.isPwd=!s.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type"]),o(a,{square:"",outlined:"",modelValue:s.password1,"onUpdate:modelValue":e[5]||(e[5]=r=>s.password1=r),label:"\u041F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0456\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C",rules:[i.validatePassword],type:s.isPwd?"password":"text"},{append:g(()=>[o(m,{name:s.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[4]||(e[4]=r=>s.isPwd=!s.isPwd)},null,8,["name"])]),_:1},8,["modelValue","rules","type"])])],512),[[p,s.showRegister]]),h(l("div",M,[l("div",E,[o(n,{flat:"",style:"",onClick:i.goToStartMenu,icon:"arrow_back",color:"primary"},null,8,["onClick"]),o(n,{flat:"",style:"",onClick:i.loginUser,label:"\u0412\u0445\u0456\u0434",color:"primary"},null,8,["onClick"])]),l("div",V,[o(a,{square:"",outlined:"",modelValue:s.email,"onUpdate:modelValue":e[6]||(e[6]=r=>s.email=r),label:"Email",type:"text",clearable:""},null,8,["modelValue"]),o(a,{square:"",outlined:"",modelValue:s.password,"onUpdate:modelValue":e[8]||(e[8]=r=>s.password=r),label:"\u041F\u0430\u0440\u043E\u043B\u044C",type:s.isPwdLogin?"password":"text"},{append:g(()=>[o(m,{name:s.isPwdLogin?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[7]||(e[7]=r=>s.isPwdLogin=!s.isPwdLogin)},null,8,["name"])]),_:1},8,["modelValue","type"])]),this.codeExists&&t.confirmStatus==="success"?(u(),d("div",L," \u041F\u043E\u0448\u0442\u0430 \u043F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043D\u0430 ")):c("",!0),this.codeExists&&t.confirmStatus==="error"?(u(),d("div",R," \u041F\u043E\u0448\u0442\u0430 \u043D\u0435 \u043F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043D\u0430 ")):c("",!0),this.loginError==!0?(u(),d("div",I," \u0412\u0430\u043C \u043D\u0430 \u043F\u043E\u0448\u0442\u0443 \u0431\u0443\u043B\u043E \u043D\u0430\u0434\u0456\u0441\u043B\u0430\u043D\u043E \u043B\u0438\u0441\u0442\u0430, \u043F\u0435\u0440\u0435\u0439\u0434\u0456\u0442\u044C \u0437\u0430 \u043F\u043E\u0441\u0438\u043B\u0430\u043D\u043D\u044F\u043C \u0432 \u043D\u044C\u043E\u043C\u0443 \u0434\u043B\u044F \u043F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043D\u043D\u044F ")):c("",!0)],512),[[p,s.showLogin]])],64)}var F=f(x,[["render",U]]);export{F as default};
