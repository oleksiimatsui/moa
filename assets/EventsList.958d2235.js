import{Q as y}from"./QBtn.35dac5c7.js";import{E as k,T as w,Q as g}from"./TopPanel.318148ad.js";import{_ as N,I as F,J as l,K as a,W as r,f as o,N as n,F as m,X as T,M as p,Y as d,Z as u}from"./index.2d1c1e3f.js";import{E as x}from"./EventIcon.519b6a6e.js";import"./uid.8c2a8409.js";import"./QMenu.604f0253.js";import"./scroll.55c5e954.js";import"./volleyball.b505ad05.js";import"./format.3e32b8d9.js";import"./convertDate.2fe32ce1.js";import"./leaflet-src.ffd70e66.js";const V={components:{EventFilters:k,TopPanel:w,EventIcon:x},data(){return{isSearchActive:!1,showFilters:!1,searchName:""}},computed:{...F({events:"getEvents",eventsStatus:"getEventsStatus"}),searchInputClasses(){return{"hidden md:!block lg:!block":!this.isSearchActive,"md:block":this.isSearchActive,"lg:block":this.isSearchActive,"sm:block":this.isSearchActive,"search-input":!0}}},async mounted(){await this.getEvents()},methods:{toggleSearch(){this.isSearchActive=!this.isSearchActive,this.isSearchActive&&this.$nextTick(()=>{this.$el.querySelector(".search-input").focus()})},async getEvents(){await Promise.all([this.events.length<1?this.$store.dispatch("GET_EVENTS"):void 0])},async update(s){await Promise.all([this.$store.dispatch("GET_EVENTS",{filters:{...s},searchName:this.searchName})]),this.showFilters=!1},async search(s){this.searchName=s,await Promise.all([this.$store.dispatch("GET_EVENTS",{searchName:this.searchName})])}}},A={class:""},b={key:0,class:"status"},I={key:1,class:"status"},C={class:"flex mt-3"},G={class:"text-gray-500 ml-auto h-fit"},P=n("div",{class:"inline-block"},null,-1);function Q(s,t,B,L,i,c){const v=l("top-panel"),_=l("router-link"),f=l("EventIcon"),E=l("EventFilters");return a(),r(m,null,[o(v,{class:"sticky top-0 left-0 z-10",onShowFilters:t[0]||(t[0]=e=>i.showFilters=!i.showFilters),searchText:i.searchName,onUpdateText:t[1]||(t[1]=e=>c.search(e))},null,8,["searchText"]),n("div",null,[n("div",A,[s.eventsStatus=="loading"?(a(),r("div",b,[o(y,{color:"primary",size:"3em",class:"mx-auto"})])):s.eventsStatus=="error"?(a(),r("div",I," \u0429\u043E\u0441\u044C \u043F\u0456\u0448\u043B\u043E \u043D\u0435 \u0442\u0430\u043A - \u043F\u0435\u0432\u043D\u043E, \u043F\u0440\u043E\u0431\u043B\u0435\u043C\u0438 \u0437\u0456 \u0437'\u0454\u0434\u043D\u0430\u043D\u043D\u044F\u043C. ")):(a(!0),r(m,{key:2},T(s.events,(e,S)=>{var h;return a(),r("div",{key:S,class:"event-item relative"},[o(_,{class:"",to:"/event-page?id="+e.id},{default:p(()=>[d(u(e.name),1)]),_:2},1032,["to"]),n("div",C,[n("div",G,[o(f,{class:"inline-block w-5",icon:(h=e.type)==null?void 0:h.typeIcon},null,8,["icon"]),P,d(" "+u(e.type.typeName),1)])])])}),128))])]),o(g,{modelValue:i.showFilters,"onUpdate:modelValue":t[4]||(t[4]=e=>i.showFilters=e),side:"left",class:"w-fit"},{default:p(()=>[o(E,{class:"p-3 h-full",onClose:t[2]||(t[2]=e=>i.showFilters=!1),onUpdate:t[3]||(t[3]=e=>c.update(e))})]),_:1},8,["modelValue"])],64)}var Z=N(V,[["render",Q]]);export{Z as default};
